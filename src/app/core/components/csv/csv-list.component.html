<nz-card  nzSize="default">
  <nz-tree
      [nzData]="nodes"
      [nzTreeTemplate]="nzTreeTemplate"
      [nzVirtualHeight]="'400px'"
      [nzBlockNode]="true"
    >
  </nz-tree>
</nz-card>
    <ng-template #nzTreeTemplate let-node let-origin="origin">
      <span class="custom-node">
        <span *ngIf="!node.isLeaf">
          <i nz-icon [nzType]="origin.isExpanded ? 'folder-open' : 'folder'" (click)="openFolder(origin)"></i>
          <span class="folder-name">{{ node.title }}</span>
        </span>
        <span *ngIf="node.isLeaf" class="file-node">
          <i nz-icon nzType="file-excel" nzTheme="twotone" [nzTwotoneColor]="'#52c41a'"></i>
          <span class="file-name">{{ node.title }}</span>
          <button 
            nz-button 
            nzType="link" 
            nzShape="circle" 
            nz-tooltip 
            nzTooltipTitle="Descargar"
            (click)="downloadFile(node.key, node.title)"
          >
            <i nz-icon nzType="download"></i>
          </button>
        </span>
      </span>
    </ng-template>

<div nz-row nzJustify="center">
  <nz-pagination
    [nzPageIndex]="pageIndex"
    [nzTotal]="totalItems"
    [nzPageSize]="pageSize"
    (nzPageIndexChange)="pageIndexChange($event)"
  ></nz-pagination>
</div>

<div class="steps-action" *nzModalFooter>
  <button nz-button nzType="default" (click)="cancelForm()">
    <span>Cancelar</span>
  </button>
  <button nz-button nzType="primary">
    <span>Generar Evidencia</span>
  </button>
</div>